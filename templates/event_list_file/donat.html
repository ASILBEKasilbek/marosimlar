{% load static %}

<!-- Donat / Reklama (20%) -->
<div class="col-lg-3 col-md-4 order-2">
  <aside class="card shadow-lg rounded-4 sticky-lg-top" style="top: 16px; border: none;">
    <div class="card-body text-center p-4">

      <!-- Title -->
      <h5 class="fw-bold text-gradient mb-3" style="background: linear-gradient(90deg,#0d6efd,#6610f2); -webkit-background-clip: text; color: transparent;">
        🎁 Donat / Reklama
      </h5>
      <p class="text-muted small mb-4">Bu joyga reklama yoki banner qo‘yishingiz mumkin.</p>

      <!-- Buttons -->
      <a href="/donate/click/" class="btn btn-gradient w-100 mb-2" style="background: linear-gradient(135deg,#28a745,#20c997); color: white; border: none; transition: all 0.3s;">
        💳 Donat qilish
      </a>
      <a href="#" class="btn btn-outline-primary w-100 mb-3" style="border-radius: 50px;">Batafsil →</a>

      <!-- Progress -->
      {% if goal %}
      <div class="progress mb-2" style="height: 10px; border-radius: 8px; overflow: hidden;">
        <div class="progress-bar bg-success" role="progressbar" 
             style="width: {{ goal.progress_percent|floatformat:0 }}%; transition: width 1s ease-in-out;" 
             aria-valuenow="{{ goal.progress_percent|floatformat:0 }}" aria-valuemin="0" aria-valuemax="100">
        </div>
      </div>
      <p class="small text-muted">
        Maqsad: ${{ goal.target_amount }} — Hozircha: ${{ goal.current_amount }}
      </p>
      {% endif %}

      <!-- QR Code -->
      <div class="mb-3">
        <img src="{% static 'images/qr-donate.png' %}" alt="QR Donat" class="img-fluid rounded-3 shadow-sm">
        <p class="small text-muted mt-2">📱 QR orqali tezkor to‘lov</p>
      </div>

      <!-- Recent Donors -->
      <h6 class="fw-semibold text-dark mb-2">So‘nggi donotorlar:</h6>
      <ul class="list-unstyled small text-muted mb-3 text-start ps-3">
        <li>✅ Asilbek - $ 15</li>
        {% for donor in donors %}
          <li>✅ {{ donor.name }} – ${{ donor.amount }}</li>
        {% empty %}
          <li>Hozircha donotorlar yo‘q</li>
        {% endfor %}
      </ul>

      <!-- Carousel -->
      {% if banners %}
      <div id="adCarousel" class="carousel slide rounded-4 shadow-sm" data-bs-ride="carousel">
        <div class="carousel-inner rounded-4 overflow-hidden">
          {% for banner in banners %}
          <div class="carousel-item {% if forloop.first %}active{% endif %}">
            <img src="{{ banner.image.url }}" class="d-block w-100" alt="{{ banner.alt_text }}" style="object-fit: cover; height: 180px;">
          </div>
          {% endfor %}
        </div>
      </div>
      {% endif %}

    </div>
  </aside>
</div>

<!-- Custom Styles -->
<style>
  .btn-gradient:hover {
    transform: translateY(-2px);
    box-shadow: 0 6px 12px rgba(40, 167, 69, 0.3);
  }
  .text-gradient {
    font-size: 1.25rem;
  }
</style>
